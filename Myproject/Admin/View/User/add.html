<extend name="Public:main" /><block name="cssjs"></block><block name="area"><li><a href="#">添加用户</a></li></block><block name="content">    <div class="formbody">		<div class="formtitle"><span>添加用户</span></div>		<form action="__ACTION__" method="post" name="myform">		<ul class="forminfo">				<li><label>用户名:</label><input name="username" class="dfinput" type="text" autocomplete="off" /><i><input type="button" class="validuser ibtn2" value="检查是否可用" /></i></li>		<li><label>昵称:</label><input name="nickname" class="dfinput" type="text" autocomplete="off" /><i></i></li>		<li><label>密码:</label><input name="password" class="dfinput" type="text" autocomplete="off" /><i></i></li>		<li><label>确认密码:</label><input name="password2" class="dfinput" type="text" autocomplete="off" /><i></i></li>		<li><label>邮箱:</label><input name="email" class="dfinput" type="text" autocomplete="off" /><i></i></li>				</ul>		</form>    </div><script type="text/javascript">$(function(e){	$(".validuser").bind("click", function(e) {		var username = $("input[name='username']").val();		if(username.length < 6) {			alert('用户名长度至少为6位！');			return false;		}		$.ajax({			url: '{:U('Admin/validuser')}',			type: 'POST',			dataType: 'json',			data: {'v_type':'user', 'v_var':'username', 'v_value':username},			success: function(data) {				$(".valid_msg").remove();				if(data.code=='1') {					$(".validuser").before('<span class="valid_msg valid_s">可用</span> ');				} else if(data.code=='-1') {					$(".validuser").before('<span class="valid_msg valid_e">已存在</span> ');				}			}		});	});	$(".adddomain").bind("click", function(e) {		$("#adddomain_place").append('<li><label>域:</label><input name="domain[]" class="dfinput" type="text" autocomplete="off" /><i class="deldomain" style="cursor:pointer">删除</i></li>');	});	$(".deldomain").live("click", function(e) {		$(this).parent("li").remove();	});	$(".btn").click(function(e) {		e.preventDefault();		var username_val = $("input[name='username']").val();		var password_val = $("input[name='password']").val();		var password2_val = $("input[name='password2']").val();		var email_val = $("input[name='email']").val();		var domain_val = $("input[name='domain[]']").val();				var domain_patten = /^(?=^.{3,255}$)(www\.)?[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+(:\d+)*(\/\w+\.\w+)*$/;				if(username_val.length<6) {			alert('用户名长度至少为6位！');			return false;		}		if(password_val.length<6) {			alert('密码长度至少为6位！');			return false;		}		if(password2_val!=password_val) {			alert('两次密码不相同！');			return false;		}		var email_reg = /^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/;		if(!email_reg.test(email_val)) {			alert('邮箱格式有误！');			return false;		}		if(domain_val.length<1) {			alert('域不能为空！');			return false;		}		var err_domain = 0;		$("input[name='domain[]']").each(function(index, el) {			var d_v = $(this).val();			if(!domain_patten.test(d_v)) {				alert('域名格式有误');				err_domain++;				return false;			}		});		if(err_domain<=0){			$("form[name='myform']").submit();		}	});});</script></block>